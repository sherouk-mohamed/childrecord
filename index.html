<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>QR Code Generator</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <style>
    #qrcode { margin: 20px; }
    .container { max-width: 600px; margin: 0 auto; padding: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Student QR Code Generator</h1>
    
    <div>
      <label>Student ID: <input type="text" id="inputStudentId"></label><br>
      <label>Student Name: <input type="text" id="inputChildName"></label><br>
      <button onclick="generateQR()">Generate QR Code</button>
    </div>
    
    <div id="qrcode"></div>
    <div id="generatedUrl"></div>
    
    <h2>Testing Area</h2>
    <div id="testResults">
      <p>Try scanning the QR code or visiting the generated URL to see if parameters appear.</p>
    </div>
  </div>

  <script>
    function generateQR() {
      const studentId = document.getElementById('inputStudentId').value;
      const childName = document.getElementById('inputChildName').value;
      
      if (!studentId || !childName) {
        alert("Please enter both Student ID and Name");
        return;
      }
      
      // Encode parameters
      const baseUrl = "https://sherouk-mohamed.github.io/childrecord/";
      const params = new URLSearchParams({
        studentId: studentId,
        childName: childName
      });
      const fullUrl = baseUrl + "?" + params.toString();
      
      // Display URL
      document.getElementById('generatedUrl').innerHTML = 
        `<strong>Generated URL:</strong> <a href="${fullUrl}" target="_blank">${fullUrl}</a>`;
      
      // Generate QR code
      document.getElementById("qrcode").innerHTML = "";
      new QRCode(document.getElementById("qrcode"), {
        text: fullUrl,
        width: 200,
        height: 200,
      });
      
      // Simulate parameter reading (for testing on this page)
      simulateParameterReading(fullUrl);
    }
    
    function simulateParameterReading(url) {
      const testUrl = new URL(url);
      const studentId = testUrl.searchParams.get('studentId');
      const childName = testUrl.searchParams.get('childName');
      
      document.getElementById('testResults').innerHTML = `
        <h3>Test Results (simulated)</h3>
        <p>URL: ${url}</p>
        <p>Extracted Student ID: <strong>${studentId}</strong></p>
        <p>Extracted Student Name: <strong>${childName}</strong></p>
        <p>If these values are correct but don't show in your form, check your script.js file.</p>
      `;
    }
  </script>
</body>
</html>
